(this["webpackJsonpgoit-react-hw-03-template"]=this["webpackJsonpgoit-react-hw-03-template"]||[]).push([[0],{11:function(t,e,a){t.exports={overlay:"Modal_overlay__2GjdW",modal:"Modal_modal__P3_V5"}},14:function(t,e,a){t.exports={item:"ImageGalleryItem_item__2ey0n",image:"ImageGalleryItem_image__2xsbt"}},15:function(t,e,a){t.exports={btnContainer:"Button_btnContainer__TI2wR",loadmorebtn:"Button_loadmorebtn__1JN2t"}},27:function(t,e,a){t.exports={loaderContainer:"Loader_loaderContainer__19ipN"}},30:function(t,e,a){t.exports={list:"ImageGallery_list__3mqUc"}},31:function(t,e,a){t.exports={App:"App_App__16ZpL"}},38:function(t,e,a){},79:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a(0),r=a.n(o),s=a(4),c=a.n(s),i=(a(37),a(38),a(16)),l=a(5),u=a(6),h=a(8),g=a(7),m=a(26),d=a.n(m),p=(a(60),a(27)),b=a.n(p),j=function(){return Object(n.jsx)("div",{className:b.a.loaderContainer,children:Object(n.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:100,width:100,timeout:3e3})})},f=a(10),v=a(13),y=a.n(v),_=a(28),O=a(29),x=a.n(O),w=function(){var t=Object(_.a)(y.a.mark((function t(e,a){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("".concat("https://pixabay.com/api","/?image_type=photo&orientation=horizontal&q=").concat(e,"&page=").concat(a,"&per_page=8&key=").concat("19039117-820a9ced6542bb27a724ef11a"));case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),S=(a(25),a(9)),C=a.n(S),k=function(t){Object(h.a)(a,t);var e=Object(g.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={searchQuery:""},t.handleInputChange=function(e){t.setState({searchQuery:e.currentTarget.value.toLowerCase()})},t.handleSubmit=function(e){e.preventDefault(),""!==t.state.searchQuery.trim()?(t.props.onSubmit(t.state.searchQuery),t.setState({searchQuery:""})):f.b.error("Please add search query")},t}return Object(u.a)(a,[{key:"render",value:function(){var t=this.state.searchQuery;return Object(n.jsx)("header",{className:C.a.header,children:Object(n.jsxs)("form",{className:C.a.form,onSubmit:this.handleSubmit,children:[Object(n.jsx)("button",{type:"submit",className:C.a.searchbutton,children:Object(n.jsx)("span",{className:C.a.label,children:"Search"})}),Object(n.jsx)("input",{className:C.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:t,onChange:this.handleInputChange})]})})}}]),a}(o.Component),I=a(14),M=a.n(I),N=function(t){var e=t.image,a=t.toggleModal;return Object(n.jsx)("li",{className:M.a.item,children:Object(n.jsx)("img",{src:e.webformatURL,alt:e.tags,className:M.a.image,onClick:function(){a({status:!0,src:e.largeImageURL,alt:e.tags})}})})},B=a(30),L=a.n(B),Q=function(t){var e=t.images,a=t.toggleModal;return Object(n.jsx)("ul",{className:L.a.list,children:e.map((function(t){return Object(n.jsx)(N,{image:t,toggleModal:a},t.id)}))})},D=a(11),F=a.n(D),P=function(t){Object(h.a)(a,t);var e=Object(g.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggleModal({status:!1})},t.handleBackdropClick=function(e){e.target===e.currentTarget&&t.props.toggleModal({status:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props,e=t.src,a=t.alt;return Object(n.jsx)("div",{className:F.a.overlay,onClick:this.handleBackdropClick,children:Object(n.jsx)("div",{className:F.a.modal,children:Object(n.jsx)("img",{className:F.a.img,src:e,alt:a})})})}}]),a}(o.Component),T=a(15),A=a.n(T),E=function(t){var e=t.onClick;return Object(n.jsx)("div",{className:A.a.btnContainer,children:Object(n.jsx)("button",{type:"button",className:A.a.loadmorebtn,onClick:e,children:"Load More"})})},U=a(31),H=a.n(U),G=function(t){Object(h.a)(a,t);var e=Object(g.a)(a);function a(){var t;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))).state={searchQuery:"",images:[],totalHits:0,largeImageURL:"",page:1,error:null,isLoading:!1,showModal:!1,showButton:!1,message:"",targetImage:null},t.onSubmit=function(e){t.setState({searchQuery:e})},t.onIncrementPage=function(){t.setState((function(t){return{page:t.page+1}}))},t.onScrollPage=function(){setTimeout((function(){window.scrollTo({top:document.documentElement.clientHeight,behavior:"smooth"})}),1200)},t.onCheckButton=function(){var e=t.state,a=e.totalHits;a>e.images.length?t.setState({showButton:!0}):t.setState({showButton:!1}),a||f.b.error("No result:( try smth else")},t.toggleModal=function(e){var a=e.status,n=e.src,o=e.alt;a?t.setState({targetImage:{src:n,alt:o},showModal:!0}):t.setState({targetImage:null,showModal:!1})},t}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.searchImages()}},{key:"componentDidUpdate",value:function(t,e){var a=this.state,n=a.searchQuery,o=a.page;e.searchQuery!==n&&(this.searchImages(n,1),this.setState({page:1})),e.page!==o&&this.searchImages(n,o)}},{key:"searchImages",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;""!==e?(this.setState({isLoading:!0}),w(e,a).then((function(e){1===a?t.setState({totalHits:e.totalHits,images:e.hits}):(t.setState((function(t){return{images:[].concat(Object(i.a)(t.images),Object(i.a)(e.hits))}})),t.onScrollPage()),t.onCheckButton()})).catch((function(e){return t.setState({error:"Smth went wrong:( please try again"})})).finally((function(){return t.setState({isLoading:!1})}))):this.setState({images:[],showButton:!1})}},{key:"render",value:function(){var t=this.state,e=t.images,a=t.isLoading,o=t.showModal,r=t.targetImage,s=t.showButton;return Object(n.jsxs)("div",{className:H.a.app,children:[Object(n.jsx)(k,{onSubmit:this.onSubmit}),a&&Object(n.jsx)(j,{}),e.length>0&&Object(n.jsx)(Q,{images:e,toggleModal:this.toggleModal}),o&&Object(n.jsx)(P,{src:r.src,alt:r.alt,toggleModal:this.toggleModal}),s&&Object(n.jsx)(E,{onClick:this.onIncrementPage}),Object(n.jsx)(f.a,{autoClose:3e3})]})}}]),a}(o.Component),K=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,82)).then((function(e){var a=e.getCLS,n=e.getFID,o=e.getFCP,r=e.getLCP,s=e.getTTFB;a(t),n(t),o(t),r(t),s(t)}))};c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),K()},9:function(t,e,a){t.exports={header:"Searchbar_header__34uEY",form:"Searchbar_form__XuKjc",searchbutton:"Searchbar_searchbutton__2-Qcg",label:"Searchbar_label__1BV3w",input:"Searchbar_input__2C4aO"}}},[[79,1,2]]]);
//# sourceMappingURL=main.5a5b154c.chunk.js.map